version: '3.8'

services:
  loan-lead-backend:
    build: .
    container_name: loan-lead-backend
    ports:
      - "8040:8040"
    environment:
      - MONGO_URI=mongodb+srv://dbAdmin:admin%40123@cluster0.gcitgdq.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0
      - DB_NAME=client_meetings
      - GOOGLE_SERVICE_ACCOUNT_JSON={"type":"service_account","project_id":"loanleadapp","private_key_id":"12388aaa1de8f221f763908e4995ca73fc55da2f","private_key":"-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCNUms5rfN88JT8\nqhDdXwUsnZrqdHUBIWjTMmSoepS5QP1TswvZBW6ZzlUo/w/q4fhIXPAwqa2rHMrK\n4u0oDxkHHnxtz/WoApnsW8pfumg6eIosVZoUjietaPFdAvgx/mt5HU4rn3B4IBUz\n/BftMKdqNDhmzzTVJEjazf8vjWtZMmQgLvT84qvr3swCGrNy3Q062olVFH++sHAc\nyWwrRhQqUwjRkSbQXc0NdPCIP4A32AM5k6jO2l+Qp6duddzOVOuuleZWFMtFr5x6\n2YHo/5fF7S4ewfHqlppKTY+i8vB5hxE8Thhc5sD6jdN9UPVS9DIVar/7W5sdT6rC\n06+V/JuZAgMBAAECggEADWcXCWxbuEPhmijPp3IyJAetpoJCJBS03VRdKYFR04ci\njCqVFN4oBBw5nvhTQrwIxDKHcQYJyD2kM4oPL3DNhD66H3jM9apX4/IJbZS/LjRt\nkXc42q3OSerqLew9kt6fKk7C/oe4SE9t01u0/s2FD+4N7B1goSPRnDa6XRpbZ1hB\nyh8xdIZL8VAPC/kOyZdZEI90PnXIk1gK96/laa/yIelYI+Plfp0VEuOnFBuPVc9t\nEDh6+E0ZNBsjU7taPEREgYyviPdHBy1t2oe7jpvQ+rIX6n/dVCcCacIZ61pSAnww\nQE7+pJud01HYqD1FCZAzNmBSHA7au5zUSoSjNNyN5QKBgQDF9IPXfLvzCU0G0Tfg\nv8dfPjgFE/3ZLWXimdyhOO01QlIUSKZG/meKhUwDqLNmGAV4enDDmWlf7d3wEufV\nsVhF5g74ZPIVjcHxEs7wROc1zHf8licK/tJUYA0nhfLYF4Bk35YbC4HUHoxRd/wf\nCz1giRAdknQoDEWVBtOFkzf0AwKBgQC2wr0Q4C/t2B2nmaXGms+mQ4XTKnEyaX6e\nOnj+Ho1E8W7AiaQQghMauIBLbRNxsPZdQbRjZr+2ekDMNEIWL+/4lkUQ+4oGrwE1\nNwcyNfWnSg0vXg8EpDvgVIt/W4njHkvr1DQIiZa2QUSOAMVRfzFe0N5y8hHl8gbA\nrNA9p0ZVMwKBgDyVFZhoUzkRGqLAewJsjv7GEuzy7lh9/VV5Uz2AJ5CKKIaOqVzG\n1TdejiH8ilLvfRUfG82w8L/sE2U60/rhWKujuecpNbGE/drir7R20e/0ELCb330M\n+Z/a+YukAetCXggBKXZDcktRwg3Y069IiFM3/1edj7EF+HGgcjHKGXCzAoGBAIaF\nusKkMcNBEzrdRn90TinUg7mWAPIZYqC2634pINTBXUMNTRz1kXhWm+Bo7in+Fqk4\nBr4v0CdRv0ZPpOFN8bWpbjb833Dh+eKgmYRk4Wd8g039TtKczJHnyTI6P7lUAJAa\nhx5NoAiQ7BQWDydYlw9ycHptIa1+w2epDDKFYKivAoGBALJOWhNXXRg6ftvPQZYS\nrYeOmAzgmQq9Jzvg7EgiKKkPsU5Pdi/Umss+AfRl/0DqK/KxD0MXgAW72QkI995G\n8M2Izf02f1ClsF3TdCKUqI8R2Tb7oechVoYMeXZVbNIiwvr7XBLZtWXXB4aMsUHw\nOr7ZUOxe6YpqsUMG21tuXReQ\n-----END PRIVATE KEY-----\n","client_email":"loanleadacc@loanleadapp.iam.gserviceaccount.com","client_id":"116637457465202683150","auth_uri":"https://accounts.google.com/o/oauth2/auth","token_uri":"https://oauth2.googleapis.com/token","auth_provider_x509_cert_url":"https://www.googleapis.com/oauth2/v1/certs","client_x509_cert_url":"https://www.googleapis.com/robot/v1/metadata/x509/loanleadacc%40loanleadapp.iam.gserviceaccount.com","universe_domain":"googleapis.com"}
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8040/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s 