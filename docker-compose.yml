version: '3.8'

services:
  loan-lead-backend:
    build: .
    container_name: loan-lead-backend
    ports:
      - "8040:8040"
    environment:
      - MONGO_URI=mongodb+srv://dbAdmin:admin%40123@cluster0.gcitgdq.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0
      - DB_NAME=client_meetings
      - GOOGLE_SERVICE_ACCOUNT_JSON_B64=ewogICJ0eXBlIjogInNlcnZpY2VfYWNjb3VudCIsCiAgInByb2plY3RfaWQiOiAibG9hbmxlYWRhcHAiLAogICJwcml2YXRlX2tleV9pZCI6ICIxMjM4OGFhYTFkZThmMjIxZjc2MzkwOGU0OTk1Y2E3M2ZjNTVkYTJmIiwKICAicHJpdmF0ZV9rZXkiOiAiLS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tXG5NSUlFdmdJQkFEQU5CZ2txaGtpRzl3MEJBUUVGQUFTQ0JLZ3dnZ1NrQWdFQUFvSUJBUUNOVW1zNXJmTjg4SlQ4XG5xaERkWHdVc25acnFkSFVCSVdqVE1tU29lcFM1UVAxVHN3dlpCVzZaemxVby93L3E0ZmhJWFBBd3FhMnJITXJLXG40dTBvRHhrSEhueHR6L1dvQXBuY1c4cGZ1bWc2ZUlvc1Zab1VqaWV0YVBGZEF2Z3gvbXQ1SFU0cm4zQjRJQlV6XG4vQmZ0TUtkcU5EaG16elRWSkVqYXpmOHZqV3RaTW1RZ0x2VDg0cXZyM3N3Q0dyTnkzUTA2Mm9sVkZIKytzSEFjXG55V3dyUmhRcVV3alJrU2JRWGMwTmRQQ0lQNEEzMkFNNWs2ak8ybCtRcDZkdWRkek9WT3V1bGVaV0ZNdEZyNXg2XG4yWUhvLzVmRjdTNGV3ZkhxbHBwS1RZK2k4dkI1aHhFOFRoaGM1c0Q2amROOVVQVlM5RElWYXIvN1c1c2RUNnJDXG4wNitWL0p1WkFnTUJBQUVDZ2dFQURXY1hDV3hidUVQaG1palBwM0l5SkFldHBvSkNKQlMwM1ZSZEtZRlIwNGNpXG5qQ3FWRk40b0JCdzVudmhUUXJ3SXhES0hjUVlKeUQya000b1BMM0ROaEQ2Nkgzak05YXBYNC9JSmJaUy9MalJ0XG5rWGM0MnEzT1NlcnFMZXc5a3Q2ZktrN0Mvb2U0U0U5dDAxdTAvczJGRCs0TjdCMWdvU1BSbkRhNlhScGJaMWhCXG55aDh4ZElaTDhWQVBDL2tPeVpkWkVJOTBQblhJazFnSzk2L2xhYS95SWVsWUkrUGxmcDBWRXVPbkZCdVBWYzl0XG5FRGg2K0UwWk5Cc2pVN3RhUEVSRWdZeXZpUGRIQnkxdDJvZTdqcHZRK3JJWDZuL2RWQ2NDYWNJWjYxcFNBbnd3XG5RRTcrcEp1ZDAxSFlxRDFGQ1pBek5tQlNIQTdhdTV6VVNvU2pOTnlONVFLQmdRREY5SVBYZkx2ekNVMEcwVGZnXG52OGRmUGpnRkUvM1pMV1hpbWR5aE9PMDFRbElVU0taRy9tZUtoVXdEcUxObUdBVjRlbkREbVdsZjdkM3dFdWZWXG5zVmhGNWc3NFpQSVZqY0h4RXM3d1JPYzF6SGY4bGljSy90SlVZQTBuaGZMWUY0QmszNVliQzRIVUhveFJkL3dmXG5DejFnaVJBZGtuUW9ERVdWQnRPRmt6ZjBBd0tCZ1FDMndyMFE0Qy90MkIybm1hWEdtcyttUTRYVEtuRXlhWDZlXG5PbmorSG8xRThXN0FpYVFRZ2hNYXVJQkxiUk54c1BaZFFiUmpacisyZWtETU5FSVdMKy80bGtVUSs0b0dyd0UxXG5Od2N5TmZXblNnMHZYZzhFcER2Z1ZJdC9XNG5qSGt2cjFEUUlpWmEyUVVTT0FNVlJmekZlME41eThoSGw4Z2JBXG5yTkE5cDBaVk13S0JnRHlWRlpob1V6a1JHcUxBZXdKc2p2N0dFdXp5N2xoOS9WVjVVejJBSjVDS0tJYU9xVnpHXG4xVGRlamlIOGlsTHZmUlVmRzgydzhML3NFMlU2MC9yaFdLdWp1ZWNwTmJHRS9kcmlyN1IyMGUvMEVMQ2IzMzBNXG4rWi9hK1l1a0FldENYZ2dCS1haRGNrdFJ3ZzNZMDY5SWlGTTMvMWVkajdFRitIR2djakhLR1hDekFvR0JBSWFGXG51c0trTWNOQkV6cmRSbjkwVGluVWc3bVdBUElaWXFDMjYzNHBJTlRCWFVNTlRSejFrWGhXbStCbzdpbitGcWs0XG5CcjR2MENkUnYwWlBwT0ZOOGJXcGJqYjgzM0RoK2VLZ21ZUms0V2Q4ZzAzOVR0S2N6SkhueVRJNlA3bFVB SkFhXG5oeDVOb0FpUTdCUVdEeWRZbHc5eWNIcHRJYTErdzJlcERES0ZZS2l2QW9HQkFMSk9XaE5YWFJnNmZ0dlBRWllTXG5yWWVPbUF6Z21R cTlKenZnN0VnaUtLa1BzVTVQZGkvVW1zcytBZlJsLzBEcUsvS3hEME1YZ0FXNzJRa0k5OTVHXG44TTJJemYwMmYxQ2xzRjNUZENLVXFJOFIy VGI3b2VjaFZvWU1lWFpWYk5JaXd2cjdYQkxadFdYWEI0YU1zVUh3XG5PcjdaVU94ZTZZcHFzVU1HMjF0dVhSZVFcbi0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS1cbiIsCiAgImNsaWVudF9lbWFpbCI6ICJsb2FubGVhZGFjY0Bsb2FubGVhZGFwcC5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSIsCiAgImNsaWVudF9pZCI6ICIxMTY2Mzc0NTc0NjUyMDI2ODMxNTAiLAogICJhdXRoX3VyaSI6ICJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20vby9vYXV0aDIvYXV0aCIsCiAgInRva2VuX3VyaSI6ICJodHRwczovL29hdXRoMi5nb29nbGVhcGlzLmNvbS90b2tlbiIsCiAgImF1dGhfcHJvdmlkZXJfeDUwOV9jZXJ0X3VybCI6ICJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjEvY2VydHMiLAogICJjbGllbnRfeDUwOV9jZXJ0X3VybCI6ICJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9yb2JvdC92MS9tZXRhZGF0YS94NTA5L2xvYW5sZWFkYWNjJTQwbG9hbmxlYWRhcHAuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLAogICJ1bml2ZXJzZV9kb21haW4iOiAiZ29vZ2xlYXBpcy5jb20iCn0K
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8040/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s 