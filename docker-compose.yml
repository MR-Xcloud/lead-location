version: '3.8'

services:
  loan-lead-backend:
    build: .
    container_name: loan-lead-backend
    ports:
      - "8040:8040"
    environment:
      - MONGO_URI=mongodb+srv://dbAdmin:admin%40123@cluster0.gcitgdq.mongodb.net/?retryWrites=true&w=majority&appName=Cluster0
      - DB_NAME=client_meetings
      - GOOGLE_SERVICE_ACCOUNT_JSON_B64=eyJ0eXBlIjoic2VydmljZV9hY2NvdW50IiwicHJvamVjdF9pZCI6ImxvYW5sZWFkYXBwIiwicHJpdmF0ZV9rZXlfaWQiOiIxMjM4OGFhYTFkZThmMjIxZjc2MzkwOGU0OTk1Y2E3M2ZjNTVkYTJmIiwicHJpdmF0ZV9rZXkiOiItLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS0KTUlJRXZnSUJBREFOQmdrcWhraUc5dzBCQVFFRkFBU0NCS2d3Z2dTa0FnRUFBb0lCQVFDTlVtczVyZk44OEpUOApxaERkWHdVc25acnFkSFVCSVdqVE1tU29lcFM1UVAxVHN3dlpCVzZaemxVby93L3E0ZmhJWFBBd3FhMnJITXJLCjR1MG9EeGtISG54dHovV29BcG5zVzhwZnVtZzZlSW9zVlpvVWppZXRhUEZkQXZneC9tdDVIVTRybjNCNElCVXoKL0JmdE1LZHFORGhtenpUVkpFamF6Zjh2ald0Wk1tUWdMdlQ4NHF2cjNzd0NHck55M1EwNjJvbFZGSCsrc0hBYwp5V3dyUmhRcVV3alJrU2JRWGMwTmRQQ0lQNEEzMkFNNWs2ak8ybCtRcDZkdWRkek9WT3V1bGVaV0ZNdEZyNXg2CjJZSG8vNWZGN1M0ZXdmSHFscHBLVFkraTh2QjVoeEU4VGhoYzVzRDZqZE45VVBWUzlESVZhci83VzVzZFQ2ckMKMDYrVi9KdVpBZ01CQUFFQ2dnRUFEV2NYQ1d4YnVFUGhtaWpQcDNJeUpBZXRwb0pDSkJTMDNWUmRLWUZSMDRjaQpqQ3FWRk40b0JCdzVudmhUUXJ3SXhES0hjUVlKeUQya000b1BMM0ROaEQ2Nkgzak05YXBYNC9JSmJaUy9MalJ0CmtYYzQycTNPU2VycUxldzlrdDZmS2s3Qy9vZTRTRTl0MDF1MC9zMkZEKzRON0IxZ29TUFJuRGE2WFJwYloxaEIKeWg4eGRJWkw4VkFQQy9rT3laZFpFSTkwUG5YSWsxZ0s5Ni9sYWEveUllbFlJK1BsZnAwVkV1T25GQnVQVmM5dApFRGg2K0UwWk5Cc2pVN3RhUEVSRWdZeXZpUGRIQnkxdDJvZTdqcHZRK3JJWDZuL2RWQ2NDYWNJWjYxcFNBbnd3ClFFNytwSnVkMDFIWXFEMUZDWkF6Tm1CU0hBN2F1NXpVU29Tak5OeU41UUtCZ1FERjlJUFhmTHZ6Q1UwRzBUZmcKdjhkZlBqZ0ZFLzNaTFdYaW1keWhPTzAxUWxJVVNLWkcvbWVLaFV3RHFMTm1HQVY0ZW5ERG1XbGY3ZDN3RXVmVgpzVmhGNWc3NFpQSVZqY0h4RXM3d1JPYzF6SGY4bGljSy90SlVZQTBuaGZMWUY0QmszNVliQzRIVUhveFJkL3dmCkN6MWdpUkFka25Rb0RFV1ZCdE9Ga3pmMEF3S0JnUUMyd3IwUTRDL3QyQjJubWFYR21zK21RNFhUS25FeWFYNmUKT25qK0hvMUU4VzdBaWFRUWdoTWF1SUJMYlJOeHNQWmRRYlJqWnIrMmVrRE1ORUlXTCsvNGxrVVErNG9HcndFMQpOd2N5TmZXblNnMHZYZzhFcER2Z1ZJdC9XNG5qSGt2cjFEUUlpWmEyUVVTT0FNVlJmekZlME41eThoSGw4Z2JBCnJOQTlwMFpWTXdLQmdEeVZGWmhvVXprUkdxTEFld0pzanY3R0V1enk3bGg5L1ZWNVV6MkFKNUNLS0lhT3FWekcKMVRkZWppSDhpbEx2ZlJVZkc4Mnc4TC9zRTJVNjAvcmhXS3VqdWVjcE5iR0UvZHJpcjdSMjBlLzBFTENiMzMwTQorWi9hK1l1a0FldENYZ2dCS1haRGNrdFJ3ZzNZMDY5SWlGTTMvMWVkajdFRitIR2djakhLR1hDekFvR0JBSWFGCnVzS2tNY05CRXpyZFJuOTBUaW5VZzdtV0FQSVpZcUMyNjM0cElOVEJYVU1OVFJ6MWtYaFdtK0JvN2luK0ZxazQKQnI0djBDZFJ2MFpQcE9GTjhiV3BiamI4MzNEaCtlS2dtWVJrNFdkOGcwMzlUdEtjekpIbnlUSTZQN2xVQUpBYQpoeDVOb0FpUTdCUVdEeWRZbHc5eWNIcHRJYTErdzJlcERES0ZZS2l2QW9HQkFMSk9XaE5YWFJnNmZ0dlBRWllTCnJZZU9tQXpnbVFxOUp6dmc3RWdpS0trUHNVNVBkaS9VbXNzK0FmUmwvMERxSy9LeEQwTVhnQVc3MlFrSTk5NUcKOE0ySXpmMDJmMUNsc0YzVGRDS1VxSThSMlRiN29lY2hWb1lNZVhaVmJOSWl3dnI3WEJMWnRXWFhCNGFNc1VIdwpPcjdaVU94ZTZZcHFzVU1HMjF0dVhSZVEKLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLQoiLCJjbGllbnRfZW1haWwiOiJsb2FubGVhZGFjY0Bsb2FubGVhZGFwcC5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSIsImNsaWVudF9pZCI6IjExNjYzNzQ1NzQ2NTIwMjY4MzE1MCIsImF1dGhfdXJpIjoiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGgiLCJ0b2tlbl91cmkiOiJodHRwczovL29hdXRoMi5nb29nbGVhcGlzLmNvbS90b2tlbiIsImF1dGhfcHJvdmlkZXJfeDUwOV9jZXJ0X3VybCI6Imh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92MS9jZXJ0cyIsImNsaWVudF94NTA5X2NlcnRfdXJsIjoiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vcm9ib3QvdjEvbWV0YWRhdGEveDUwOS9sb2FubGVhZGFjYyU0MGxvYW5sZWFkYXBwLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwidW5pdmVyc2VfZG9tYWluIjoiZ29vZ2xlYXBpcy5jb20ifQo=
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8040/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s 